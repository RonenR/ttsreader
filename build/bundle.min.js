!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){exports.Languages={allLocales:[["Afrikaans (Suid-Afrika)","af-ZA","Afrikaans (South Africa)"],["አማርኛ (ኢትዮጵያ)","am-ET","Amharic (Ethiopia)"],["Հայ (Հայաստան)","hy-AM","Armenian (Armenia)"],["Azərbaycan (Azərbaycan)","az-AZ","Azerbaijani (Azerbaijan)"],["Bahasa Indonesia (Indonesia)","id-ID","Indonesian (Indonesia)",1],["Bahasa Melayu (Malaysia)","ms-MY","Malay (Malaysia)"],["বাংলা (বাংলাদেশ)","bn-BD","Bengali (Bangladesh)",1],["বাংলা (ভারত)","bn-IN","Bengali (India)"],["Català (Espanya)","ca-ES","Catalan (Spain)"],["Čeština (Česká republika)","cs-CZ","Czech (Czech Republic)"],["Dansk (Danmark)","da-DK","Danish (Denmark)"],["Deutsch (Deutschland)","de-DE","German (Germany)"],["English (Australia)","en-AU","English (Australia)"],["English (Canada)","en-CA","English (Canada)"],["English (Ghana)","en-GH","English (Ghana)"],["English (Great Britain)","en-GB","English (United Kingdom)"],["English (India)","en-IN","English (India)"],["English (Ireland)","en-IE","English (Ireland)"],["English (Kenya)","en-KE","English (Kenya)"],["English (New Zealand)","en-NZ","English (New Zealand)"],["English (Nigeria)","en-NG","English (Nigeria)"],["English (Philippines)","en-PH","English (Philippines)"],["English (Singapore)","en-SG","English (Singapore)"],["English (South Africa)","en-ZA","English (South Africa)"],["English (Tanzania)","en-TZ","English (Tanzania)"],["English (United States)","en-US","English (United States)",1],["Español (Argentina)","es-AR","Spanish (Argentina)"],["Español (Bolivia)","es-BO","Spanish (Bolivia)"],["Español (Chile)","es-CL","Spanish (Chile)"],["Español (Colombia)","es-CO","Spanish (Colombia)"],["Español (Costa Rica)","es-CR","Spanish (Costa Rica)"],["Español (Ecuador)","es-EC","Spanish (Ecuador)"],["Español (El Salvador)","es-SV","Spanish (El Salvador)"],["Español (España)","es-ES","Spanish (Spain)",1],["Español (Estados Unidos)","es-US","Spanish (United States)"],["Español (Guatemala)","es-GT","Spanish (Guatemala)"],["Español (Honduras)","es-HN","Spanish (Honduras)"],["Español (México)","es-MX","Spanish (Mexico)"],["Español (Nicaragua)","es-NI","Spanish (Nicaragua)"],["Español (Panamá)","es-PA","Spanish (Panama)"],["Español (Paraguay)","es-PY","Spanish (Paraguay)"],["Español (Perú)","es-PE","Spanish (Peru)"],["Español (Puerto Rico)","es-PR","Spanish (Puerto Rico)"],["Español (República Dominicana)","es-DO","Spanish (Dominican Republic)"],["Español (Uruguay)","es-UY","Spanish (Uruguay)"],["Español (Venezuela)","es-VE","Spanish (Venezuela)"],["Euskara (Espainia)","eu-ES","Basque (Spain)"],["Filipino (Pilipinas)","fil-PH","Filipino (Philippines)"],["Français (Canada)","fr-CA","French (Canada)"],["Français (France)","fr-FR","French (France)",1],["Galego (España)","gl-ES","Galician (Spain)"],["ქართული (საქართველო)","ka-GE","Georgian (Georgia)"],["ગુજરાતી (ભારત)","gu-IN","Gujarati (India)"],["Hrvatski (Hrvatska)","hr-HR","Croatian (Croatia)"],["IsiZulu (Ningizimu Afrika)","zu-ZA","Zulu (South Africa)"],["Íslenska (Ísland)","is-IS","Icelandic (Iceland)"],["Italiano (Italia)","it-IT","Italian (Italy)"],["Jawa (Indonesia)","jv-ID","Javanese (Indonesia)"],["ಕನ್ನಡ (ಭಾರತ)","kn-IN","Kannada (India)"],["ភាសាខ្មែរ (កម្ពុជា)","km-KH","Khmer (Cambodia)"],["ລາວ (ລາວ)","lo-LA","Lao (Laos)"],["Latviešu (latviešu)","lv-LV","Latvian (Latvia)"],["Lietuvių (Lietuva)","lt-LT","Lithuanian (Lithuania)"],["Magyar (Magyarország)","hu-HU","Hungarian (Hungary)"],["മലയാളം (ഇന്ത്യ)","ml-IN","Malayalam (India)"],["मराठी (भारत)","mr-IN","Marathi (India)"],["Nederlands (Nederland)","nl-NL","Dutch (Netherlands)"],["नेपाली (नेपाल)","ne-NP","Nepali (Nepal)"],["Norsk bokmål (Norge)","nb-NO","Norwegian Bokmål (Norway)"],["Polski (Polska)","pl-PL","Polish (Poland)"],["Português (Brasil)","pt-BR","Portuguese (Brazil)",1],["Português (Portugal)","pt-PT","Portuguese (Portugal)"],["Română (România)","ro-RO","Romanian (Romania)"],["සිංහල (ශ්රී ලංකාව)","si-LK","Sinhala (Sri Lanka)"],["Slovenčina (Slovensko)","sk-SK","Slovak (Slovakia)"],["Slovenščina (Slovenija)","sl-SI","Slovenian (Slovenia)"],["Urang (Indonesia)","su-ID","Sundanese (Indonesia)"],["Swahili (Tanzania)","sw-TZ","Swahili (Tanzania)"],["Swahili (Kenya)","sw-KE","Swahili (Kenya)"],["Suomi (Suomi)","fi-FI","Finnish (Finland)"],["Svenska (Sverige)","sv-SE","Swedish (Sweden)"],["தமிழ் (இந்தியா)","ta-IN","Tamil (India)"],["தமிழ் (சிங்கப்பூர்)","ta-SG","Tamil (Singapore)"],["தமிழ் (இலங்கை)","ta-LK","Tamil (Sri Lanka)"],["தமிழ் (மலேசியா)","ta-MY","Tamil (Malaysia)"],["తెలుగు (భారతదేశం)","te-IN","Telugu (India)"],["Tiếng Việt (Việt Nam)","vi-VN","Vietnamese (Vietnam)"],["Türkçe (Türkiye)","tr-TR","Turkish (Turkey)"],["اردو (پاکستان)","ur-PK","Urdu (Pakistan)"],["اردو (بھارت)","ur-IN","Urdu (India)",1],["Ελληνικά (Ελλάδα)","el-GR","Greek (Greece)"],["Български (България)","bg-BG","Bulgarian (Bulgaria)"],["Русский (Россия)","ru-RU","Russian (Russia)"],["Српски (Србија)","sr-RS","Serbian (Serbia)"],["Українська (Україна)","uk-UA","Ukrainian (Ukraine)"],["עברית (ישראל)","he-IL","Hebrew (Israel)"],["العربية (إسرائيل)","ar-IL","Arabic (Israel)"],["العربية (الأردن)","ar-JO","Arabic (Jordan)"],["العربية (الإمارات)","ar-AE","Arabic (United Arab Emirates)"],["العربية (البحرين)","ar-BH","Arabic (Bahrain)"],["العربية (الجزائر)","ar-DZ","Arabic (Algeria)"],["العربية (السعودية)","ar-SA","Arabic (Saudi Arabia)"],["العربية (العراق)","ar-IQ","Arabic (Iraq)"],["العربية (الكويت)","ar-KW","Arabic (Kuwait)"],["العربية (المغرب)","ar-MA","Arabic (Morocco)"],["العربية (تونس)","ar-TN","Arabic (Tunisia)"],["العربية (عُمان)","ar-OM","Arabic (Oman)"],["العربية (فلسطين)","ar-PS","Arabic (State of Palestine)"],["العربية (قطر)","ar-QA","Arabic (Qatar)"],["العربية (لبنان)","ar-LB","Arabic (Lebanon)"],["العربية (مصر)","ar-EG","Arabic (Egypt)",1],["فارسی (ایران)","fa-IR","Persian (Iran)"],["हिन्दी (भारत)","hi-IN","Hindi (India)"],["ไทย (ประเทศไทย)","th-TH","Thai (Thailand)"],["한국어 (대한민국)","ko-KR","Korean (South Korea)"],["國語 (台灣)","zh-TW","Chinese, Mandarin (Traditional, Taiwan)"],["廣東話 (香港)","yue-Hant-HK","Chinese, Cantonese (Traditional, Hong Kong)"],["日本語（日本）","ja-JP","Japanese (Japan)"],["普通話 (香港)","zh-HK","Chinese, Mandarin (Simplified, Hong Kong)"],["普通话 (中国大陆)","zh","Chinese, Mandarin (Simplified, China)"]],normalizeCode:function(code){return code?code.toUpperCase().replace(/_/g,"-"):""},areCodesEqual:function(a,b){return a==b||!(!a||!b)&&this.normalizeCode(a)==this.normalizeCode(b)},isLanguageCodeSupported:function(code){return!!this.getLocaleByCode(code)},supportedLanguagesString:function(){let str="";for(let lang of this.allLocales)str+=this.codeToLabel(lang[1])+"\n";return str},codeToName:function(code,nameType="native"){if(!code)return"";let list=code.includes("-")||code.includes("_")?this.allLocales:this.getSupportedLanguagesOnlyList();for(const language of list)if(this.areCodesEqual(language[1],code))switch(nameType){case"english":return language[2];case"both":return language[0]+" - "+language[2];default:return language[0]}},getFlagForCountryCode:function(code){if(null==code||2!=code.length)return"";if("IL"==(code=code.toUpperCase()))return"🇮🇱";if("PS"==code)return"🇵🇸";return String.fromCodePoint(code.codePointAt(0)-65+127462)+String.fromCodePoint(code.codePointAt(1)-65+127462)},codeToCountryCode:function(code){if(!code||code.length<2)return"";if((code=code.replace("-","_")).indexOf("_")>-1){let parts=code.split("_");code=parts[parts.length-1]}else if("zh"==(code=code.substring(code.length-2,code.length))||"ZH"==code)return"CN";return code},codeToLanguageCodeOnly:function(code){return null==code||code.length<2?"":code.toLowerCase().replace("_","-").split("-")[0]},doCodesShareLanguage:function(a,b){return this.codeToLanguageCodeOnly(a)==this.codeToLanguageCodeOnly(b)},getLocaleByCode:function(code){if(!code)return"";if(!(code=this.normalizeCode(code)).includes("-"))return this.getDefaultLocaleForLanguage(code);for(let lang of this.allLocales)if(this.areCodesEqual(lang[1],code))return lang;return""},getSupportedLanguagesOnlyList:function(){let languagesOnlyKeys={};for(const locale of this.allLocales)languagesOnlyKeys[this.codeToLanguageCodeOnly(locale[1])]=[locale[0].split(" (")[0],this.codeToLanguageCodeOnly(locale[1]),locale[2].split(" (")[0]];let list=[];for(const key of Object.getOwnPropertyNames(languagesOnlyKeys))list.push(languagesOnlyKeys[key]);return list=list.sort(((a,b)=>a[0].localeCompare(b[0]))),list},getAllLocalesForLanguage:function(code){if(!code)return[];return code=this.codeToLanguageOnly(code),this.allLocales.filter((lang=>this.codeToLanguageCodeOnly(lang[1])==code))},getDefaultLocaleForLanguage:function(code){if(!code)return"";code=this.codeToLanguageOnly(code).toLowerCase();let locales=this.allLocales.filter((lang=>this.codeToLanguageCodeOnly(lang[1])==code));if(!locales||0==locales.length)return"";if(1==locales.length)return locales[0];let locales4=locales.filter((locale=>locale.length>3));return locales4&&locales4.length>0?locales4[0]:locales[0]},codeToLanguageOnly:function(code){return code?code.toLowerCase().replace("_","-").split("-")[0]:""},codeToFlag:function(code){return this.getFlagForCountryCode(this.codeToCountryCode(code))},codeToLabel:function(code){return this.codeToFlag(code)+" "+this.codeToName(code)}}},{}],2:[function(require,module,exports){window.wsGlobals=window.wsGlobals||{},window.wsGlobals.TtsEngine=require("./index").TtsEngine},{"./index":3}],3:[function(require,module,exports){const{Languages:Languages}=require("locales");exports.TtsEngine={DEFAULT_LANG:"en",voice:null,voices:null,rate:.9,utteranceId:0,startedAndNotTerminatedCounter:0,listener:null,utterance:null,_googleBugTimeout:null,_speakTimeout:null,_canceledAtMs:0,init:function(listener){null!=listener&&(this.listener=listener),this._populateVoices();let self=this;void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=function(){self._populateVoices()})},setListener:function(listener){this.listener=listener},_setBestMatchingVoice:function(voice,voiceURI,lang){if(null==this.voices||0==this.voices.length)return"";if(voice)for(const iVoice of this.voices)if(iVoice==voice)return this.voice=iVoice,iVoice.voiceURI;if(voiceURI)for(const iVoice of this.voices)if(iVoice.voiceURI==voiceURI)return this.voice=iVoice,iVoice.voiceURI;if(lang)for(const iVoice of this.voices)if(Languages.doCodesShareLanguage(iVoice.lang,lang))return this.voice=iVoice,iVoice.voiceURI;if(null!=this.voice)for(const iVoice of this.voices)if(iVoice==this.voice)return iVoice.voiceURI;return this.voice=this.voices[0],this.voice.voiceURI},_populateVoices:function(){let voices=window.speechSynthesis.getVoices();if(null!=voices&&voices.length>0){this.voices;null!=this.voices&&0!=this.voices.length||(this.voices=voices,this._setBestMatchingVoice(this.voice,this.DEFAULT_LANG)),null!=this.listener&&void 0!==this.listener.onInit&&this.listener.onInit(this.voices)}},setVoiceByUri:function(voiceURI){this._setBestMatchingVoice(null,voiceURI,null)},setVoice:function(voice){this._setBestMatchingVoice(voice,null,null)},setRate:function(rate){"string"==typeof rate&&(rate=Number(rate)),isNaN(rate)||(rate<.1&&(rate=.1),rate>4&&(rate=4),this.rate=rate)},isInitiated:function(){return null!=this.voices},_defaultOnStart:function(ev){this.startedAndNotTerminatedCounter++,this._solveChromeBug()},_defaultOnEnd:function(ev){this.startedAndNotTerminatedCounter>0&&this.startedAndNotTerminatedCounter--,this._clearUtteranceTimeouts()},_defaultOnError:function(ev){this.startedAndNotTerminatedCounter>0&&this.startedAndNotTerminatedCounter--,this._clearUtteranceTimeouts()},_clearUtteranceTimeouts:function(){null!=this._googleBugTimeout&&(window.clearTimeout(this._googleBugTimeout),this._googleBugTimeout=null)},_solveChromeBug:function(){if(null==this.voice)return;if(-1==this.voice.voiceURI.toLowerCase().indexOf("google"))return;this._clearUtteranceTimeouts();let self=this;this._googleBugTimeout=window.setTimeout((function(){window.speechSynthesis.pause(),window.speechSynthesis.resume(),self._solveChromeBug()}),2e3)},_prepareTextForSynthesis:function(text){let decodedText=text;return decodedText=decodedText.replace("·",", "),decodedText=decodedText.replace("- ",", "),decodedText.trim(),decodedText},speakOut:function(text){let instance=this;if(this.startedAndNotTerminatedCounter>0||window.speechSynthesis.paused||window.speechSynthesis.pending||window.speechSynthesis.speaking)return this.stop(),void(this._speakTimeout=window.setTimeout((function(){instance.speakOut(text)}),200));if(!text||0==text.length)return void(this.utterance&&this.utterance.onend());if(text=this._prepareTextForSynthesis(text),!this.isInitiated())return!1;this.utteranceId++;let utterance=new SpeechSynthesisUtterance;this.utterance=utterance,utterance.text=text,null==this.voice&&this._setBestMatchingVoice(null,null,this.DEFAULT_LANG),utterance.lang=this.voice.lang,utterance.voiceURI=this.voice.voiceURI,utterance.voice=this.voice,utterance.rate=this.rate;let self=this;utterance.onstart=function(ev){self._defaultOnStart(ev),self.listener&&self.listener.onStart&&self.listener.onStart()},utterance.onboundary=function(event){},utterance.onend=function(ev){self._defaultOnEnd(ev),self.listener&&self.listener.onDone&&self.listener.onDone(),utterance=null},utterance.onerror=function(ev){self._defaultOnError(ev),utterance=null},this._speakUtterance(utterance)},stop(){null!=this._speakTimeout&&(window.clearTimeout(this._speakTimeout),this._speakTimeout=null),window.speechSynthesis.cancel(),this.startedAndNotTerminatedCounter=0,this._canceledAtMs=Date.now()},_speakUtterance(utterance){null!=this._speakTimeout&&(window.clearTimeout(this._speakTimeout),this._speakTimeout=null),window.speechSynthesis.paused&&window.speechSynthesis.resume(),Date.now()-this._canceledAtMs>100?window.speechSynthesis.speak(utterance):this._speakTimeout=window.setTimeout((function(){window.speechSynthesis.speak(utterance)}),200)}}},{locales:1}]},{},[2]);
